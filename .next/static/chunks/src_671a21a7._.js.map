{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/39340/Desktop/Universit%C3%A0/Tesi/DAppCert/verifica-certificati/src/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = 'https://rygyqxalcvxrekpfkqga.supabase.co';  \r\nconst supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ5Z3lxeGFsY3Z4cmVrcGZrcWdhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA0MzM5NjcsImV4cCI6MjA2NjAwOTk2N30.lo2ydzPjibp2nl3W_hnhQNP4od_jprdw4RDVHyXKDJ0';        \r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,cAAc;AACpB,MAAM,kBAAkB;AAEjB,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAAE,aAAa","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/39340/Desktop/Universit%C3%A0/Tesi/DAppCert/verifica-certificati/src/app/actions/registerStudent.ts"],"sourcesContent":["import { supabase } from '@/lib/supabaseClient';\r\nimport bcrypt from 'bcryptjs';\r\n\r\ninterface StudentData {\r\n  nome: string;\r\n  cognome: string;\r\n  dataNascita: string;\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\nexport default async function registerStudent(data: StudentData) {\r\n  // Calcola l'hash\r\n  const passwordHash = await bcrypt.hash(data.password, 10);\r\n  const { error } = await supabase\r\n    .from('users')\r\n    .insert({\r\n      nome: data.nome,\r\n      cognome: data.cognome,\r\n      data_nascita: data.dataNascita,\r\n      email: data.email,\r\n      password_hash: passwordHash,\r\n    });\r\n\r\n  if (error) throw error;\r\n\r\n  return { success: true };\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAUe,eAAe,gBAAgB,IAAiB;IAC7D,iBAAiB;IACjB,MAAM,eAAe,MAAM,oIAAA,CAAA,UAAM,CAAC,IAAI,CAAC,KAAK,QAAQ,EAAE;IACtD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,+HAAA,CAAA,WAAQ,CAC7B,IAAI,CAAC,SACL,MAAM,CAAC;QACN,MAAM,KAAK,IAAI;QACf,SAAS,KAAK,OAAO;QACrB,cAAc,KAAK,WAAW;QAC9B,OAAO,KAAK,KAAK;QACjB,eAAe;IACjB;IAEF,IAAI,OAAO,MAAM;IAEjB,OAAO;QAAE,SAAS;IAAK;AACzB","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/39340/Desktop/Universit%C3%A0/Tesi/DAppCert/verifica-certificati/src/app/actions/registerEntity.ts"],"sourcesContent":["import { supabase } from '@/lib/supabaseClient';\r\nimport bcrypt from 'bcryptjs';\r\n\r\ninterface EntityData {\r\n  nome: string;\r\n  email: string;\r\n  password: string; // hash della password!\r\n}\r\n\r\nexport default async function registerEntity(data: EntityData) {\r\n  // Calcola l'hash\r\n  const passwordHash = await bcrypt.hash(data.password, 10);\r\n  const { error } = await supabase\r\n    .from('entities')\r\n    .insert({\r\n      nome_ente: data.nome,\r\n      email: data.email,\r\n      password_hash: passwordHash,\r\n    });\r\n\r\n  if (error) throw error;\r\n\r\n  return { success: true };\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAQe,eAAe,eAAe,IAAgB;IAC3D,iBAAiB;IACjB,MAAM,eAAe,MAAM,oIAAA,CAAA,UAAM,CAAC,IAAI,CAAC,KAAK,QAAQ,EAAE;IACtD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,+HAAA,CAAA,WAAQ,CAC7B,IAAI,CAAC,YACL,MAAM,CAAC;QACN,WAAW,KAAK,IAAI;QACpB,OAAO,KAAK,KAAK;QACjB,eAAe;IACjB;IAEF,IAAI,OAAO,MAAM;IAEjB,OAAO;QAAE,SAAS;IAAK;AACzB","debugId":null}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/39340/Desktop/Universit%C3%A0/Tesi/DAppCert/verifica-certificati/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from \"react\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { GraduationCap, Building2, Search } from \"lucide-react\";\nimport registerStudent from \"@/app/actions/registerStudent\";\nimport registerEntity from \"@/app/actions/registerEntity\";\n\nexport default function Home() {\n  const [showRegister, setShowRegister] = useState(false);\n  const [registerAs, setRegisterAs] = useState<'student' | 'entity' | null>(null);\n  const [formData, setFormData] = useState<any>({});\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n\n  // Validazione password dinamica\n  const validatePassword = (password: string) => {\n    return /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[\\W_]).{8,}$/.test(password);\n  };\n\n  // Validazione mail dinamica\n  const validateEmail = (email: string) => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n  };\n\n  //Reset form registrazione\n  const resetForm = () => {\n    setFormData({});\n    setMessage(null);\n  };\n\n\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData((prev: any) => ({\n      ...prev,\n      [e.target.name]: e.target.value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage(null);\n\n    //Controllo campi\n    if (!validateEmail(formData.email)) {\n      setMessage({ type: 'error', text: 'Inserisci un\\'email valida' });\n      setLoading(false);\n    return;\n    }\n    \n    if (formData.password !== formData.confirmPassword) {\n      setMessage({ type: 'error', text: 'Le password non coincidono' });\n      setLoading(false);\n      return;\n    }\n\n    if (!validatePassword(formData.password)) {\n      setMessage({ type: 'error', text: 'La password non rispetta i requisiti di sicurezza (almeno una lettera maiuscola, una minuscola, un carattere speciale, un numero)' });\n      setLoading(false);\n      return;\n    }\n\n    try {\n      if (registerAs === 'student') {\n        await registerStudent(formData);\n      } else if (registerAs === 'entity') {\n        await registerEntity(formData);\n      }\n      setMessage({ type: 'success', text: 'Registrazione avvenuta con successo!' });\n      setFormData({});\n    } catch (error: any) {\n      setMessage({ type: 'error', text: error.message || 'Errore durante la registrazione' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <main className=\"min-h-screen bg-gradient-to-br from-indigo-900 to-blue-700 text-white flex flex-col\">\n      <header className=\"p-6 text-center text-5xl md:text-6xl font-extrabold tracking-tight\">UniChain</header>\n\n      <section className=\"flex flex-col md:flex-row justify-center items-center gap-8 px-6 py-12\">\n        <div className=\"max-w-xl text-center\">\n          <h1 className=\"text-4xl md:text-5xl font-extrabold mb-6 leading-tight drop-shadow-lg\">\n            La tua identità accademica sulla Blockchain\n          </h1>\n          <p className=\"text-lg text-gray-200 mb-4\">Registrazione e verifica dei certificati in modo trasparente e sicuro.</p>\n        </div>\n        <Image\n          src=\"https://www.netgroup.it/wp-content/uploads/2023/04/Blockchain-Technology_2.jpg\"\n          alt=\"Blockchain\"\n          width={600}\n          height={400}\n          className=\"rounded-xl shadow-2xl object-cover\"\n          priority\n        />\n      </section>\n\n      <section className=\"grid grid-cols-1 md:grid-cols-3 gap-6 px-8 py-12 text-center\">\n        {/* Enti */}\n        <div className=\"bg-white text-gray-900 rounded-2xl p-6 shadow-xl\">\n          <div className=\"flex items-center justify-center gap-2 mb-3 text-indigo-700\">\n            <Building2 size={32} />\n            <h2 className=\"text-3xl font-bold\">Enti</h2>\n          </div>\n          <p className=\"mb-6\">Crea, gestisci e assegna certificati accademici.</p>\n          <div className=\"flex flex-col gap-3\">\n            <button onClick={() => { resetForm(); setShowRegister(true); setRegisterAs('entity'); }}\n              className=\"bg-indigo-700 text-white py-2 px-4 rounded-lg hover:bg-indigo-800\">\n              Registrati\n            </button>\n            <Link href=\"\" className=\"border border-indigo-700 text-indigo-700 py-2 px-4 rounded-lg hover:bg-indigo-100\">\n              Login\n            </Link>\n          </div>\n        </div>\n\n        {/* Studenti */}\n        <div className=\"bg-white text-gray-900 rounded-2xl p-6 shadow-xl\">\n          <div className=\"flex items-center justify-center gap-2 mb-3 text-indigo-700\">\n            <GraduationCap size={32} />\n            <h2 className=\"text-3xl font-bold\">Studenti</h2>\n          </div>\n          <p className=\"mb-6\">Consulta e gestisci i tuoi certificati accademici.</p>\n          <div className=\"flex flex-col gap-3\">\n            <button onClick={() => { resetForm(); setShowRegister(true); setRegisterAs('student'); }}\n              className=\"bg-indigo-700 text-white py-2 px-4 rounded-lg hover:bg-indigo-800\">\n              Registrati\n            </button>\n            <Link href=\"\" className=\"border border-indigo-700 text-indigo-700 py-2 px-4 rounded-lg hover:bg-indigo-100\">\n              Login\n            </Link>\n          </div>\n        </div>\n\n        {/* Verifica */}\n        <div className=\"bg-white text-gray-900 rounded-2xl p-6 shadow-xl\">\n          <div className=\"flex items-center justify-center gap-2 mb-3 text-green-600\">\n            <Search size={32} />\n            <h2 className=\"text-3xl font-bold\">Verifica</h2>\n          </div>\n          <p className=\"mb-6\">Inserisci l&apos;ID del certificato per verificarne l&apos;autenticità.</p>\n          <Link href=\"/verify\" className=\"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700\">Verifica Certificato</Link>\n        </div>\n      </section>\n\n      {showRegister && (\n        <section className=\"bg-white text-gray-900 p-6 rounded-xl shadow-xl mx-auto mb-12 w-full max-w-xl\">\n          <h2 className=\"text-2xl font-bold mb-4\">Registrazione</h2>\n\n            <form className=\"flex flex-col gap-3 mt-4\" onSubmit={handleSubmit}>\n              {registerAs === 'student' && (\n                <>\n                  <input name=\"nome\" onChange={handleChange} value={formData.nome || ''} type=\"text\" placeholder=\"Nome\" className=\"border p-2 rounded\" required />\n                  <input name=\"cognome\" onChange={handleChange} value={formData.cognome || ''} type=\"text\" placeholder=\"Cognome\" className=\"border p-2 rounded\" required />\n                  <input name=\"dataNascita\" onChange={handleChange} value={formData.dataNascita || ''} type=\"date\" placeholder=\"Data di nascita\" className=\"border p-2 rounded\" required />\n                </>\n              )}\n              {registerAs === 'entity' && (\n                <input name=\"nome\" onChange={handleChange} value={formData.nome || ''} type=\"text\" placeholder=\"Nome Ente\" className=\"border p-2 rounded\" required />\n              )}\n\n              <input name=\"email\" onChange={handleChange} value={formData.email || ''} type=\"email\" placeholder=\"Email\" className=\"border p-2 rounded\" required />\n              <input name=\"password\" onChange={handleChange} value={formData.password || ''} type=\"password\" placeholder=\"Password\" className=\"border p-2 rounded\" required />\n              <input name=\"confirmPassword\" onChange={handleChange} value={formData.confirmPassword || ''} type=\"password\" placeholder=\"Conferma Password\" className=\"border p-2 rounded\" required />\n\n              {/* Messaggi */}\n              {message && (\n                <div className={`${message.type === 'error' ? 'text-red-600' : 'text-green-600'} text-sm`}>\n                  {message.text}\n                </div>\n              )}\n\n              <button type=\"submit\" disabled={loading} className=\"bg-indigo-700 text-white py-2 px-4 rounded-lg hover:bg-indigo-800\">\n                {loading ? 'Registrazione...' : 'Registrati'}\n              </button>\n            </form>\n\n          <button\n            onClick={() => {\n              setShowRegister(false);\n              setRegisterAs(null);\n              setFormData({});        // <--- resetta tutti i campi\n              setMessage(null);       // <--- resetta eventuali messaggi di errore/successo\n            }}\n            className=\"mt-4 text-sm text-gray-600 underline\"\n          >\n            Annulla\n          </button>\n        </section>\n      )}\n\n      <footer className=\"text-center py-4 text-sm text-gray-300 border-t border-gray-600\">© 2025 CertifyChain - Tutti i diritti riservati</footer>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}