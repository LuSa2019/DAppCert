{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/39340/Desktop/Universita/Tesi/DAppCert/verifica-certificati/src/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = 'https://rygyqxalcvxrekpfkqga.supabase.co';  \r\nconst supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ5Z3lxeGFsY3Z4cmVrcGZrcWdhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA0MzM5NjcsImV4cCI6MjA2NjAwOTk2N30.lo2ydzPjibp2nl3W_hnhQNP4od_jprdw4RDVHyXKDJ0';        \r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,cAAc;AACpB,MAAM,kBAAkB;AAEjB,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa","debugId":null}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/39340/Desktop/Universita/Tesi/DAppCert/verifica-certificati/src/app/actions/certificateActions.ts"],"sourcesContent":["'use server';\r\n\r\nimport { supabase } from '@/lib/supabaseClient';\r\n\r\n// ✅ Recupera certificati emessi da un ente\r\nexport async function getCertificatesByEntity(entityId: string) {\r\n  if (!entityId) throw new Error('ID ente mancante');\r\n\r\n  const { data, error } = await supabase\r\n    .from('certificates')\r\n    .select(`\r\n      id,\r\n      title,\r\n      description,\r\n      issued_date,\r\n      blockchain_tx,\r\n      users:student_id (\r\n        email,\r\n        nome,\r\n        cognome\r\n      )\r\n    `)\r\n    .eq('entity_id', entityId)\r\n    .order('issued_date', { ascending: false });\r\n\r\n  if (error) {\r\n    throw new Error(error.message);\r\n  }\r\n\r\n  return data.map((cert) => {\r\n    const student = Array.isArray(cert.users) ? cert.users[0] : cert.users;\r\n    return {\r\n      id: cert.id,\r\n      title: cert.title,\r\n      description: cert.description,\r\n      issued_date: cert.issued_date,\r\n      blockchain_tx: cert.blockchain_tx,\r\n      student_email: student?.email ?? 'N/A',\r\n      student_name: student ? `${student.nome} ${student.cognome}` : 'N/A',\r\n    };\r\n  });\r\n}\r\n\r\n// ✅ Recupera certificati di uno studente\r\nexport async function getCertificatesByStudent(studentId: string) {\r\n  if (!studentId) throw new Error('ID studente mancante');\r\n\r\n  const { data, error } = await supabase\r\n    .from('certificates')\r\n    .select(`\r\n      id,\r\n      title,\r\n      description,\r\n      issued_date,\r\n      blockchain_tx,\r\n      entities:entity_id (\r\n        nome_ente,\r\n        email\r\n      )\r\n    `)\r\n    .eq('student_id', studentId)\r\n    .order('issued_date', { ascending: false });\r\n\r\n  if (error) {\r\n    throw new Error(error.message);\r\n  }\r\n\r\n  return data.map((cert) => {\r\n    const entity = Array.isArray(cert.entities) ? cert.entities[0] : cert.entities;\r\n    return {\r\n      id: cert.id,\r\n      title: cert.title,\r\n      description: cert.description,\r\n      issued_date: cert.issued_date,\r\n      blockchain_tx: cert.blockchain_tx,\r\n      entity_name: entity?.nome_ente ?? 'N/A',\r\n      entity_email: entity?.email ?? 'N/A',\r\n    };\r\n  });\r\n}\r\n\r\n// ✅ Elimina un certificato (solo ente proprietario)\r\nexport async function deleteCertificate(id: string, entityId: string) {\r\n  if (!id || !entityId) throw new Error('ID certificato o ente mancante');\r\n\r\n  const { error } = await supabase\r\n    .from('certificates')\r\n    .delete()\r\n    .eq('id', id)\r\n    .eq('entity_id', entityId);\r\n\r\n  if (error) {\r\n    throw new Error(error.message);\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;;;;;AAGO,eAAe,wBAAwB,QAAgB;IAC5D,IAAI,CAAC,UAAU,MAAM,IAAI,MAAM;IAE/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,4HAAA,CAAA,WAAQ,CACnC,IAAI,CAAC,gBACL,MAAM,CAAC,CAAC;;;;;;;;;;;IAWT,CAAC,EACA,EAAE,CAAC,aAAa,UAChB,KAAK,CAAC,eAAe;QAAE,WAAW;IAAM;IAE3C,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,MAAM,OAAO;IAC/B;IAEA,OAAO,KAAK,GAAG,CAAC,CAAC;QACf,MAAM,UAAU,MAAM,OAAO,CAAC,KAAK,KAAK,IAAI,KAAK,KAAK,CAAC,EAAE,GAAG,KAAK,KAAK;QACtE,OAAO;YACL,IAAI,KAAK,EAAE;YACX,OAAO,KAAK,KAAK;YACjB,aAAa,KAAK,WAAW;YAC7B,aAAa,KAAK,WAAW;YAC7B,eAAe,KAAK,aAAa;YACjC,eAAe,SAAS,SAAS;YACjC,cAAc,UAAU,GAAG,QAAQ,IAAI,CAAC,CAAC,EAAE,QAAQ,OAAO,EAAE,GAAG;QACjE;IACF;AACF;AAGO,eAAe,yBAAyB,SAAiB;IAC9D,IAAI,CAAC,WAAW,MAAM,IAAI,MAAM;IAEhC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,4HAAA,CAAA,WAAQ,CACnC,IAAI,CAAC,gBACL,MAAM,CAAC,CAAC;;;;;;;;;;IAUT,CAAC,EACA,EAAE,CAAC,cAAc,WACjB,KAAK,CAAC,eAAe;QAAE,WAAW;IAAM;IAE3C,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,MAAM,OAAO;IAC/B;IAEA,OAAO,KAAK,GAAG,CAAC,CAAC;QACf,MAAM,SAAS,MAAM,OAAO,CAAC,KAAK,QAAQ,IAAI,KAAK,QAAQ,CAAC,EAAE,GAAG,KAAK,QAAQ;QAC9E,OAAO;YACL,IAAI,KAAK,EAAE;YACX,OAAO,KAAK,KAAK;YACjB,aAAa,KAAK,WAAW;YAC7B,aAAa,KAAK,WAAW;YAC7B,eAAe,KAAK,aAAa;YACjC,aAAa,QAAQ,aAAa;YAClC,cAAc,QAAQ,SAAS;QACjC;IACF;AACF;AAGO,eAAe,kBAAkB,EAAU,EAAE,QAAgB;IAClE,IAAI,CAAC,MAAM,CAAC,UAAU,MAAM,IAAI,MAAM;IAEtC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,4HAAA,CAAA,WAAQ,CAC7B,IAAI,CAAC,gBACL,MAAM,GACN,EAAE,CAAC,MAAM,IACT,EAAE,CAAC,aAAa;IAEnB,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,MAAM,OAAO;IAC/B;AACF;;;IAzFsB;IAuCA;IAsCA;;AA7EA,+OAAA;AAuCA,+OAAA;AAsCA,+OAAA","debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/39340/Desktop/Universita/Tesi/DAppCert/verifica-certificati/.next-internal/server/app/dashboard-entity/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getCertificatesByEntity as '4009146593d086f9541c47bbd394df152d0ac54185'} from 'ACTIONS_MODULE0'\nexport {deleteCertificate as '60586f3441b7247f3fc0baa9cb6d323431066d3b01'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/39340/Desktop/Universita/Tesi/DAppCert/verifica-certificati/src/app/dashboard-entity/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/dashboard-entity/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/dashboard-entity/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAqS,GAClU,mEACA","debugId":null}},
    {"offset": {"line": 267, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/39340/Desktop/Universita/Tesi/DAppCert/verifica-certificati/src/app/dashboard-entity/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/dashboard-entity/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/dashboard-entity/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAiR,GAC9S,+CACA","debugId":null}},
    {"offset": {"line": 281, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}